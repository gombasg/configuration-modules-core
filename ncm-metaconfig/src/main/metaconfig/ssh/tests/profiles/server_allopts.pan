object template server_allopts;

include 'metaconfig/ssh/server_config';

prefix "/software/components/metaconfig/services/{/etc/ssh/sshd_config}/contents";

"main/AcceptEnv" = list("LC_CTYPE", "LANG", "TERM");
"main/AddressFamily" = "any";
"main/AllowAgentForwarding" = false;
"main/AllowGroups" = list("wheel");
"main/AllowStreamLocalForwarding" = "local";
"main/AllowTcpForwarding" = "local";
"main/AllowUsers" = list("quattor");
"main/AuthenticationMethods" = list("any");
"main/AuthorizedKeysCommand" = "/usr/sbin/key-lookup";
"main/AuthorizedKeysCommandUser" = "keyuser";
"main/AuthorizedKeysFile" = list("/etc/ssh/authorized_keys", ".ssh/authorized_keys");
"main/AuthorizedPrincipalsCommand" = "/usr/sbin/principal-lookup";
"main/AuthorizedPrincipalsCommandUser" = "princuser";
"main/AuthorizedPrincipalsFile" = list("/etc/ssh/x509_users", ".ssh/x509_users");
"main/Banner" = "Configured by Quattor";
"main/ChallengeResponseAuthentication" = false;
"main/ChrootDirectory" = "/srv/ssh";
"main/Ciphers" = list("chacha20-poly1305@openssh.com", "arcfour256", "arcfour128", "aes128-cbc", "3des-cbc");
"main/ClientAliveCountMax" = 3;
"main/ClientAliveInterval" = 30;
"main/Compression" = false;
"main/DenyGroups" = list("adm");
"main/DenyUsers" = list("root");
"main/DisableForwarding" = false;
"main/ExposeAuthInfo" = false;
"main/FingerprintHash" = "sha256";
"main/ForceCommand" = "cat /etc/motd";
"main/GatewayPorts" = "clientspecified";
"main/GSSAPIAuthentication" = true;
"main/GSSAPICleanupCredentials" = true;
"main/GSSAPIKeyExchange" = true;
"main/GSSAPIStrictAcceptorCheck" = true;
"main/GSSAPIStoreCredentialsOnRekey" = true;
"main/HostbasedAcceptedKeyTypes" = list("-ssh-rsa");
"main/HostbasedAuthentication" = true;
"main/HostbasedUsesNameFromPacketOnly" = false;
"main/HostCertificate" = "/etc/ssh/ssh_host_cert.pem";
"main/HostKey" = list("/etc/ssh/ssh_host_rsa_key", "/etc/ssh/ssh_host_ed25519_key");
"main/HostKeyAgent" = "/run/ssh/key_agent.socket";
"main/HostKeyAlgorithms" = list("ecdsa-sha2-nistp256", "ecdsa-sha2-nistp384", "ecdsa-sha2-nistp521");
"main/IPQoS" = list("lowdelay", "throughput");
"main/IgnoreRhosts" = true;
"main/IgnoreUserKnownHosts" = true;
"main/KbdInteractiveAuthentication" = true;
"main/KerberosAuthentication" = false;
"main/KerberosGetAFSToken" = false;
"main/KerberosOrLocalPasswd" = false;
"main/KerberosTicketCleanup" = true;
"main/KexAlgorithms" = list("ecdh-sha2-nistp256", "ecdh-sha2-nistp384", "ecdh-sha2-nistp521");
"main/ListenAddress" = list("127.0.0.1:22", "192.168.0.1:22", "192.168.0.1:2200");
"main/LogLevel" = "DEBUG3";
"main/LoginGraceTime" = 60;
"main/MACs" = list("hmac-sha1-96-etm@openssh.com", "hmac-md5-96-etm@openssh.com");
"main/MaxAuthTries" = 3;
"main/MaxSessions" = 10;
"main/MaxStartups" = "10:30:100";
"main/PasswordAuthentication" = false;
"main/PermitEmptyPasswords" = false;
"main/PermitListen" = list("8080", "127.0.0.1:*");
"main/PermitOpen" = list("8080", "192.168.0.1:*");
"main/PermitRootLogin" = "prohibit-password";
"main/PermitTTY" = true;
"main/PermitTunnel" = "point-to-point";
"main/PermitUserEnvironment" = false;
"main/PermitUserRC" = false;
"main/PidFile" = "/run/sshd.pid";
"main/Port" = list(22, 2200);
"main/PrintLastLog" = true;
"main/PrintMotd" = true;
"main/PubkeyAcceptedKeyTypes" = list("-ssh-rsa");
"main/PubkeyAuthentication" = true;
"main/RDomain" = "%D";
"main/RSAAuthentication" = false;
"main/RekeyLimit" = list("1G", "300s");
"main/RevokedKeys" = "/etc/ssh/revoked_keys";
"main/RhostsRSAAuthentication" = false;
"main/SetEnv" = dict("LC_ALL", "C", "TERM", "xterm");
"main/StreamLocalBindMask" = "0177";
"main/StreamLocalBindUnlink" = false;
"main/Subsystem" = dict("sftp", "internal-sftp");
"main/SyslogFacility" = "AUTH";
"main/TCPKeepAlive" = true;
"main/TrustedUserCAKeys" = "/etc/ssh/trusted_cas";
"main/UseDNS" = true;
"main/UsePAM" = true;
"main/VersionAddendum" = "extra";
"main/X11DisplayOffset" = 10;
"main/X11Forwarding" = true;
"main/X11UseLocalHost" = true;
"main/XAuthLocation" = "/usr/bin/xauth";
